@model IEnumerable<WebApplication.Models.ViewModels.ProductPartialViewModel>

<div class="recommended_items">
    <!--recommended_items-->
    <h2 class="title text-center">Các sản phẩm bán chạy nhất</h2>

    <div id="recommended-item-carousel" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
            @{
                int Count = 0;
                int Length = Model.Count();
                int NumberGroups = Length / 3;
                int NumberLastGroup = Length % 3;

                while (Count < NumberGroups)
                {
                    if (Count == 0)
                    {
                        <div class="item active">
                            <div class="col-sm-4">
                                @Html.Partial("ProductItemPartial", Model.ElementAt(Count * 3))
                            </div>
                            <div class="col-sm-4">
                                @Html.Partial("ProductItemPartial", Model.ElementAt(Count * 3 + 1))
                            </div>
                            <div class="col-sm-4">
                                @Html.Partial("ProductItemPartial", Model.ElementAt(Count * 3 + 2))
                            </div>
                        </div>
                    }
                    else
                    {
                        <div class="item ">
                            <div class="col-sm-4">
                                @Html.Partial("ProductItemPartial", Model.ElementAt(Count * 3))
                            </div>
                            <div class="col-sm-4">
                                @Html.Partial("ProductItemPartial", Model.ElementAt(Count * 3 + 1))
                            </div>
                            <div class="col-sm-4">
                                @Html.Partial("ProductItemPartial", Model.ElementAt(Count * 3 + 2))
                            </div>
                        </div>
                    }
                    Count++;
                }
                if (NumberLastGroup > 0)
                {
                    <div class="item ">
                        @for (int i = 0; i < NumberLastGroup; i++)
                        {
                            <div class="col-sm-4">
                                @Html.Partial("ProductItemPartial", Model.ElementAt(Count * 3 + i))
                            </div>
                        }
                    </div>
                }

            }

        </div>
        <a class="left recommended-item-control" href="#recommended-item-carousel" data-slide="prev">
            <i class="fa fa-angle-left"></i>
        </a>
        <a class="right recommended-item-control" href="#recommended-item-carousel" data-slide="next">
            <i class="fa fa-angle-right"></i>
        </a>
    </div>
</div><!--/recommended_items-->
<script>
    $(".carousel-inner .item").first().addClass("active");
</script>
